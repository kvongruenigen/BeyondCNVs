# Script for accessing TCGA and downloading data

rule all:
	input:
		"UPDATED_FILE"

# - "API access to download data from a repository" (where this part then gets different instances from TCGA, cBioPortal)

rule maf_retrieval_gdc:
	output:
		"data/{repository}.tar.gz"
	script:
		"get_maf.py"

# - then "extract genomic variant information in the given format" (there can be many depending on the source ...);

rule vcf_extraction:
	input:
		"DATASET"
	output:
		"VARIANT_INFORMATION"
	script:
		"extraction.py"

# - then "map variants to standard `0-based sequence representation in GRCh38" format (where this part depends on the original representation)

rule GRCh38_map:
	input:
		"VARIANT_INFORMATION"
	output:
		"MAPPED_INFORMATION"
	shell/script:
		"mapping.py"

# - then "match identifiers between existing data & variants", 

rule match_id:
	input:
		"MAPPED_INFORMATION"
	output:
		"MATCHED_IDS"
	script:
		"match_ids.py"

# - then "update/merge variants into MongoDB"

rule update_merge:
	input:
		"MATCHED_IDS"
	output:
		"UPDATED_FILE" ########
	script:
		"upmerge.py"